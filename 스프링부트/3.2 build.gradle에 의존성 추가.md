```java
dependencies {
// ... 생략 ....
	// spring data JPA  
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa' 
    runtimeOnly 'com.h2database:h2'  // 인메모리 데이터베이스  
    compileOnly ' org.projectlombok:lombok'  // 롬복  
    annotationProcessor 'org.projectlombok:lombok'  
}
```

코드를 보면 `implementation 'org.springframework.boot:spring-boot-starter-data-jpa' `과 같이 입력한 형식이 보인다. **앞에 있는 것은 구성, 뒤에 있는 것은 의존성 이름이다.**
구성 : [[implementation]], [[testImplementation]], [[runtimeOnly]], [[complileOnly]], [[annotationProcessor]] 등
	자바 gradle plugin에서 의존성을 추가할 때 사용하는 키워드.
	각 키워드 마다 뒤에 나올 의존성을 어떻게 관리할지 정하는 것.




1. **controller 관련 코드 작성 (프레젠테이션 계층)**
**TestController.java**
```jsx
@RestController
public class TestController{

@Autowired //TestServie 빈 주입
TestService testService;

@GetMapping("/test")
public List<Member> getAllMembers(){
	List<Member> members = testService.getAllMembers();
	return members; 
	}
}
```



2.  **비즈니스 계층 코드**
**TestService.java**
```jsx
@Service
public class TestService{

	@Autowired
	MemberRepository memberRepository; //1. 빈 주입
	
	public List<Member> getAllMembers(){
		return memberRepository.findAll(); //2. 멤버 목록 열기
	}
}
```
	1) MemberRepository라는 bean을 주입받은 후에 2)findAll() 메서드를 호출해 멤버 테이블에 저장된 멤버 목록을 모두 가져온다. 
	HTTP 요청 (url:/test) 
	---> TestController.java (프레젠테이션 계층) <---> TestService.java (비즈니스 계층)


3. **퍼시스턴트 계층 코드 작성.** 
	DB에 접근할 때 사용할 객체인 Member DAO를 생성하고 실제 DB에 접근하는 코드를 작성한다.
	
	**Member.java**
	```java
	@NoArgsConstructor(access = AccessLevel.PROTECTED)
	@AllArgsConstructor
	@Getter
	@Entity
	public class Member{
		@Id
		@GeneratedValue(strategy = GenerationType.IDENTITY)
		@Column(name = "id", updatable = false)
		private Long id; //DB 테이블의 id컬럼과 매칭
		
		@Column(name = "name", nullable = false)
		private String name; //DB 테이블의 name컬럼과 매칭
	}
	```
	memeber라는 이름의 테이블에 접근하는 데 사용할 객체.


4. 매핑 작업에는 인터페이스 파일이 필요하다.
MemberRepository.java
	```java
	@Repository
public interface MemberRepository extends JpaRepository<Member, Long>{
}```

이 인터페이스는 DB에서 데이터를 가져오는 퍼시스턴트 계층 역할을 한다.
'member'라는 이름의 테이블에 접근해서 Member클래스에 매핑하는 구현체.

5. 작동 확인하기
resource 디렉토리에 data.sql 파일을 생성.
```sql
INSERT INTO member (id,name) VALUES (1, 'name 1')
INSERT INTO member (id,name) VALUES (2, 'name 2')
INSERT INTO member (id,name) VALUES (3, 'name 3')
```

application.yml 파일을 열어 코드 변경
```yml
spring: 
	jpa: 
	# 전송 쿼리 확인
		show-sql : true
		properties:
			hiberate:
				formal_sql : true
			
		#테이블 생성 후 sql문 작성 data.sql실행
		defer-datasource-initialization: true 
```
show -sql, format_sql 옵션은 실행과정 중, DB에 쿼리할 일이 있으면 실행 구문을 모두 보여주는 옵션
defer-datasource-initialization 옵션은 실행할 때 테이블 생성하고, data.sql에 있는 쿼리를 실행하도록 하는 옵션
모두 수정하려면 SpringBootDeveloperApplication.java 파일 탭을 누른 다음 재실행 아이콘을 클릭한다.

이제 포스트맨으로 HTTP 요청 시도.
[GET]으로 URL에 http://localhost:8080/test 을 입력하고 [Send]버튼을 누르면 스프링 부트 서버에 HTTP 요청을 전송하게 된다.

HTTP 요청 (url:/test) 
	---> TestController.java (프레젠테이션 계층) <---> TestService.java (비즈니스 계층)
		<--->MemberRepository.java (퍼시스턴트 계층) <---> DB