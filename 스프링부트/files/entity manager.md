---
aliases:
  - 엔티티 매니저
---
[[entity]]를 관리해 데이터베이스와 애플리케이션 사이에서 객체를 생성, 수정, 삭제하는 등의 역할 수행.
그리고 이러한 entity manager를 만드는 곳이 entity manager factory.
![[Pasted image 20241113001758.png|600]]

그러나 스프링 부트는 직접 엔티티 매니저 팩토리를 만들어서 관리하지 않는다. 
스프링부트는 내부에서 엔티티 매니저 팩토리를 하나만 생성해서 관리하고 @PersistenceContext 또는 @Autowired 애너테이션을 사용해서 엔티티 매니저를 사용한다.
```java
@PersistenceContext
EntityManager em; // 프록시 엔티티 매니저. 필요할 때 진짜 엔티티 매니저 호출.
```
그리고 스프링부트는 기본적으로 [[bean]]을 하나만 생성해서 공유하므로 동시성 문제가 발생할 수 있따.
그래서 실제로는 엔티티 매니저가 아닌 실제 엔티티 매니저와 연결하는 프록시(가짜) 엔티티 매니저를 사용한다. 필요할 때 데이터베이스 transaction과 관련된 실제 엔티티 매니저를 호출한다.

==entity manager는 스프링부트 JPA에서 관리하므로, 내가 직접 생성하거나 관리할 필요가 없다.==